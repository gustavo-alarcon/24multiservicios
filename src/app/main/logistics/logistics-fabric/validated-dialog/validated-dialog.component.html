<div style="max-width: 350px;">
    <div mat-dialog-title>
        <div class="ms-flex">
            <h2 class="title-login">
                {{data.item.productDescription | titlecase}} {{data.item.unit.weight}} {{data.item.unit.abbreviation}} -
                {{data.item.quantity}}
                {{data.item.unit.abbreviation}}
            </h2>
            <span class="ms-fill"></span>
            <button mat-icon-button mat-dialog-close>
                <mat-icon>close</mat-icon>
            </button>
        </div>
        <mat-divider></mat-divider>
    </div>
    <mat-dialog-content>
        <mat-progress-bar mode="indeterminate" *ngIf="loading$ | async"></mat-progress-bar>
        <form [formGroup]="validatedFormGroup" style="width: 100%">

            <mat-form-field class="w3-block w3-small" appearance="outline">
                <mat-label>Cantidad de merma</mat-label>
                <input formControlName="mermaStock" #quantity type="number" autocomplete="off" matInput
                    placeholder="Cantidad de merma">

            </mat-form-field>

            <mat-form-field class="w3-block w3-small" appearance="outline">
                <mat-label>Cantidad en devolución</mat-label>
                <input formControlName="returned" #unitPrice type="number" autocomplete="off" matInput
                    placeholder="Cantidad en devolución">

            </mat-form-field>

            <mat-form-field class="w3-block w3-small" appearance="outline">
                <mat-label>Observaciones de devolución</mat-label>
                <textarea style="min-height: 100px;" placeholder="Observaciones" formControlName="observations" matInput
                    maxlength="150"></textarea>
            </mat-form-field>

        </form>

        <div>
            <p *ngIf="validatedFormGroup.get('mermaStock').value">Ingresaran
                <strong>{{validatedFormGroup.get('mermaStock').value}}{{data.item.unit.abbreviation}}</strong> al
                <strong>almacén de merma</strong></p>
            <p *ngIf="validatedFormGroup.get('returned').value">Se devolverán
                <strong>{{validatedFormGroup.get('returned').value}}{{data.item.unit.abbreviation}}</strong> al 
                <strong>proveedor</strong></p>
            <p *ngIf="validatedFormGroup.get('returned').value || validatedFormGroup.get('mermaStock').value">Ingresarán
                <strong>{{validatedFormGroup.get('mermaStock').value + validatedFormGroup.get('returned').value}}{{data.item.unit.abbreviation}}</strong> al
                <strong>almacén regular</strong></p>
        </div>

    </mat-dialog-content>

    <mat-dialog-actions>
        <button mat-raised-button color="accent" class="w3-block" type="button" (click)="save()"
            [disabled]="!validatedFormGroup.valid">Guardar</button>
    </mat-dialog-actions>
</div>